name: Update pkg.go.dev documentation

on:
  release:
    types: [created]

jobs:
  request:
    runs-on: ubuntu-latest
    steps:
      - name: Request goreportcard.com refresh
        run: |
          curl -X POST https://goreportcard.com/checks --header 'Content-Type: application/x-www-form-urlencoded' --data-urlencode 'repo=github.com/nktmys/sqlnull'
      - name: Request proxy.golang.org cache
        run: |
          curl -X POST https://proxy.golang.org/github.com/nktmys/sqlnull/@v/${{ github.event.release.tag_name }}.info
      - name: Request pkg.go.dev documentation update
        run: |
          curl -X POST https://pkg.go.dev/fetch/github.com/nktmys/sqlnull@${{ github.event.release.tag_name }}
